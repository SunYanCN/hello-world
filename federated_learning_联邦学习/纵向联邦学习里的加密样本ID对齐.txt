
# 纵向联邦学习里的加密样本ID对齐
在纵向联邦学习里，需要找出参与方A与参与方B共有的训练样本ID，且除了A和B双方共有的样本ID（例如，一家银行和另一家电商共同的客户的ID，可以用手机设备号的哈希值作为客户的ID标识）以外，不能泄露其他样本ID给彼此。
数据对齐的难点在于如何让隐私信息不被暴露的情况下对齐数据，也就是说比如A有{u1,u2,u3,u4}四个数据，B有{u1,u2,u3,u5}四个数据，如果让A,B在不知道对方的数据前提下，找到{u1,u2,u3}这个交集。
这个过程需要用到加密样本ID对齐机制。

隐私保护下的样本ID匹配
数据对齐
数据对齐的难点在于如何让隐私信息不被暴露的情况下对齐数据，也就是说比如A有{u1,u2,u3,u4}四个数据，B有{u1,u2,u3,u5}四个数据，
如果让A,B在不知道对方的数据前提下，找到{u1,u2,u3}这个交集。
FATE SecureBoost是使用了Gang Liang and Sudarshan S. Chawathe的《Privacy-Preserving Inter-Database Operations》论文中的方法。
总体上的思路就是：
1.B先通过RSA生成n（公有密钥）、e（加密算法）、d（解密算法），然后把公钥(n,e)传给A。
2.A拿到公钥后，先将自己的数据通过哈希函数进行加密，然后通过增加噪声r,然后通过加密算法(e)加密然后回传给B。
3.B拿到加密后的Y(A)后，使用解密算法(d)解密，这时获得含有噪声的哈希值Z(A),然后B同时将自己的数据进行哈希然后在进行解密，再进行二次哈希，传给A。
4.A拿到后，先消除Z(A)的噪声，然后再进行哈希，得到D(A)，这样D(A)和Z(B)都是两方数据进行二次哈希和解密后的值，也就是处于同一纬度。这时候就可以求两者的交集。然后回传给B.
5.B拿到后通过比对自己数据和交集后的数据，得到实际的交集{u1,u2,u3}.然后回传给A.

通过上面的操作，A,B在不知道对方的差分数据下得到了交集，也就是对齐了数据样本。







