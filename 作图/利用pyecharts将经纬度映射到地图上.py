#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from pyecharts.charts import Geo
from pyecharts import options as opts
from pyecharts.globals import GeoType


def test1():
    datas = [('清平实验学校', '113.836682', '22.74969'),
 ('新桥小学', '113.842804', '22.741015'),
 ('壆岗小学', '113.825633', '22.739964'),
 ('拾悦小学', '113.828513', '22.731102'),
 ('荣根学校', '113.820273', '22.744235'),
 ('第二外国语学校', '113.842312', '22.729277'),
 ('上星学校', '113.838697', '22.723419'),
 ('蚝业小学', '113.812304', '22.745944'),
 ('万丰小学', '113.831317', '22.730886'),
 ('深圳外国语学校', '113.827698', '22.721244'),
 ('黄埔小学', '113.853363', '22.719951'),
 ('茭塘小学', '113.81677', '22.724037'),
 ('和一学校', '113.805078', '22.726765'),
 ('才华学校', '113.820546', '22.76264'),
 ('明德外语实验学校', '113.80861', '22.759181'),
 ('冠群实验学校', '113.802878', '22.746979'),
 ('华南中英文学校', '113.810698', '22.715969'),
 ('北亭实验学校', '113.83151', '22.771519'),
 ('沙井东山书院', '113.831735', '22.75474'),
 ('立才实验学校', '113.801221', '22.740042'),
 ('宝华学校', '113.819458', '22.728794'),
 ('为明双语实验学校', '113.824883', '22.746379'),
 ('金源学校', '113.817053', '22.721121'),
 ('上南学校', '113.850787', '22.728097'),
 ('华一实验学校', '113.840184', '22.730214'),
 ('厚德小学', '113.850722', '22.712298'),
 ('欣欣小学', '113.845834', '22.737545'),
 ('**幼儿园', '113.832573', '22.731622')]
    gongban_list = ['清平实验学校', '新桥小学', '壆岗小学', '拾悦小学', '荣根学校', '第二外国语学校', '上星学校', '蚝业小学', '万丰小学', '深圳外国语学校', '黄埔小学', '茭塘小学', '和一学校']
    city = '深圳'
    g = Geo()
    g.add_schema(maptype=city)

    # 定义坐标对应的名称，添加到坐标库中 add_coordinate(name, lng, lat)
    for k, lng, lat in datas:
        g.add_coordinate(k, lng, lat)

    # 定义数据对，
    ds3 = {}
    for k, t1, t2 in datas:
        ds3.setdefault(k, 0)
        if k in gongban_list:
            ds3[k] +=90
        ds3[k] += 1
        if k == '**幼儿园':
            ds3[k] += 200
    data_pair = [(k, v) for k, v in ds3.items()]

    # Geo 图类型，有 scatter, effectScatter, heatmap, lines 4 种，建议使用
    # from pyecharts.globals import GeoType
    # GeoType.GeoType.EFFECT_SCATTER，GeoType.HEATMAP，GeoType.LINES

    # 将数据添加到地图上
    g.add('', data_pair, type_=GeoType.EFFECT_SCATTER, symbol_size=5)
    # 设置样式
    g.set_series_opts(label_opts=opts.LabelOpts(is_show=True, formatter='{b}', font_size=9))
    # 自定义分段 color 可以用取色器取色
    pieces = [
        # {'max': 1, 'label': '0以下', 'color': '#50A3BA'},
        {'min': 1, 'max': 10, 'label': '民办', 'color': '#3700A4'},
        # {'min': 10, 'max': 20, 'label': '10-20', 'color': '#81AE9F'},
        # {'min': 20, 'max': 30, 'label': '20-30', 'color': '#E2C568'},
        # {'min': 30, 'max': 50, 'label': '30-50', 'color': '#FCF84D'},
        {'min': 50, 'max': 100, 'label': '公办', 'color': '#DD0200'},
        # {'min': 100, 'max': 200, 'label': '100-200', 'color': '#DD675E'},
        {'min': 200, 'label': '**幼儿园', 'color': 'green'}  # 有下限无上限
    ]
    #  is_piecewise 是否自定义分段， 变为true 才能生效
    g.set_global_opts(
        visualmap_opts=opts.VisualMapOpts(is_piecewise=True, pieces=pieces),
        title_opts=opts.TitleOpts(title="{}-周边小学分布".format('**幼儿园')),
    )

    # 渲染成html, 可用浏览器直接打开
    g.render(r'/home/gswyhq/形势和危机/入学/附近各个学校位置.html')

def test_geo():
    city = '长沙'
    g = Geo()
    g.add_schema(maptype=city)

    # 定义坐标对应的名称，添加到坐标库中 add_coordinate(name, lng, lat)
    g.add_coordinate('湖南省长沙市宁乡市横市镇藕塘', 112.21369756169062, 28.211359706637378)
    g.add_coordinate('湖南省长沙市雨花区跳马镇仙峰岭', 113.16921879037058, 28.039877432448428)
    g.add_coordinate('湖南省长沙市长沙县黄花镇新塘铺长沙黄花国际机场', 113.23212337884058, 28.19327497825815)

    # 定义数据对，
    data_pair = [('湖南省长沙市雨花区跳马镇仙峰岭', 10), ('湖南省长沙市宁乡市横市镇藕塘', 5), ('湖南省长沙市长沙县黄花镇新塘铺长沙黄花国际机场', 20)]

    # Geo 图类型，有 scatter, effectScatter, heatmap, lines 4 种，建议使用
    # from pyecharts.globals import GeoType
    # GeoType.GeoType.EFFECT_SCATTER，GeoType.HEATMAP，GeoType.LINES

    # 将数据添加到地图上
    g.add('', data_pair, type_=GeoType.EFFECT_SCATTER, symbol_size=5)
    # 设置样式
    g.set_series_opts(label_opts=opts.LabelOpts(is_show=False))
    # 自定义分段 color 可以用取色器取色
    pieces = [
        {'max': 1, 'label': '0以下', 'color': '#50A3BA'},
        {'min': 1, 'max': 10, 'label': '1-10', 'color': '#3700A4'},
        {'min': 10, 'max': 20, 'label': '10-20', 'color': '#81AE9F'},
        {'min': 20, 'max': 30, 'label': '20-30', 'color': '#E2C568'},
        {'min': 30, 'max': 50, 'label': '30-50', 'color': '#FCF84D'},
        {'min': 50, 'max': 100, 'label': '50-100', 'color': '#DD0200'},
        {'min': 100, 'max': 200, 'label': '100-200', 'color': '#DD675E'},
        {'min': 200, 'label': '200以上', 'color': '#D94E5D'}  # 有下限无上限
    ]
    #  is_piecewise 是否自定义分段， 变为true 才能生效
    g.set_global_opts(
        visualmap_opts=opts.VisualMapOpts(is_piecewise=True, pieces=pieces),
        title_opts=opts.TitleOpts(title="{}-店铺分布".format(city)),
    )
    return g

def test1():
    g = test_geo()
    # 渲染成html, 可用浏览器直接打开
    g.render(r'D:\Users\gswyhq\data\数据梳理\test_render.html')

def test3():
    datas = [['114.264_22.693', 114.264, 22.693], ['114.249_22.739', 114.249, 22.739], ['114.065_22.567', 114.065, 22.567], ['114.092_22.543', 114.092, 22.543], ['114.036_22.56', 114.036, 22.56], ['114.125_22.563', 114.125, 22.563], ['114.232_22.695', 114.232, 22.695], ['114.364_22.707', 114.364, 22.707], ['113.903_22.576', 113.903, 22.576], ['114.112_22.67', 114.112, 22.67], ['114.23_22.563', 114.23, 22.563], ['114.037_22.565', 114.037, 22.565], ['114.003_22.66', 114.003, 22.66], ['114.051_22.749', 114.051, 22.749], ['113.863_22.572', 113.863, 22.572], ['114.064_22.659', 114.064, 22.659], ['113.912_22.523', 113.912, 22.523], ['113.884_22.784', 113.884, 22.784], ['113.841_22.757', 113.841, 22.757], ['113.801_22.697', 113.801, 22.697], ['113.993_22.68', 113.993, 22.68], ['113.825_22.778', 113.825, 22.778], ['113.939_22.552', 113.939, 22.552], ['114.009_22.732', 114.009, 22.732], ['113.818_22.728', 113.818, 22.728], ['113.893_22.57', 113.893, 22.57], ['114.116_22.543', 114.116, 22.543], ['114.037_22.665', 114.037, 22.665], ['114.119_22.657', 114.119, 22.657], ['114.26_22.721', 114.26, 22.721], ['113.811_22.723', 113.811, 22.723], ['113.878_22.604', 113.878, 22.604], ['114.227_22.721', 114.227, 22.721], ['114.149_22.622', 114.149, 22.622], ['113.924_22.544', 113.924, 22.544], ['114.054_22.637', 114.054, 22.637], ['114.099_22.576', 114.099, 22.576], ['114.104_22.56', 114.104, 22.56], ['114.123_22.595', 114.123, 22.595], ['114.043_22.569', 114.043, 22.569], ['114.078_22.544', 114.078, 22.544], ['114.223_22.701', 114.223, 22.701], ['114.023_22.654', 114.023, 22.654], ['113.866_22.574', 113.866, 22.574], ['114.048_22.525', 114.048, 22.525], ['114.021_22.66', 114.021, 22.66], ['114.033_22.555', 114.033, 22.555], ['114.043_22.749', 114.043, 22.749], ['114.041_22.527', 114.041, 22.527], ['114.09_22.553', 114.09, 22.553], ['113.907_22.582', 113.907, 22.582], ['114.078_22.533', 114.078, 22.533], ['114.109_22.542', 114.109, 22.542], ['114.063_22.633', 114.063, 22.633], ['113.915_22.536', 113.915, 22.536], ['114.08_22.536', 114.08, 22.536], ['114.025_22.613', 114.025, 22.613], ['114.138_22.584', 114.138, 22.584], ['114.11_22.623', 114.11, 22.623], ['114.055_22.713', 114.055, 22.713], ['113.86_22.636', 113.86, 22.636], ['113.799_22.745', 113.799, 22.745], ['114.119_22.671', 114.119, 22.671], ['113.893_22.587', 113.893, 22.587], ['114.047_22.526', 114.047, 22.526], ['113.852_22.608', 113.852, 22.608], ['114.401_22.706', 114.401, 22.706], ['114.052_22.601', 114.052, 22.601], ['113.904_22.79', 113.904, 22.79], ['114.289_22.591', 114.289, 22.591], ['113.953_22.542', 113.953, 22.542], ['114.278_22.742', 114.278, 22.742], ['113.826_22.648', 113.826, 22.648], ['114.073_22.536', 114.073, 22.536], ['114.08_22.546', 114.08, 22.546], ['114.13_22.604', 114.13, 22.604], ['113.967_22.695', 113.967, 22.695], ['114.153_22.657', 114.153, 22.657], ['114.103_22.553', 114.103, 22.553], ['114.126_22.598', 114.126, 22.598], ['114.026_22.678', 114.026, 22.678], ['114.237_22.698', 114.237, 22.698], ['114.025_22.613', 114.025, 22.613], ['114.265_22.749', 114.265, 22.749], ['114.058_22.646', 114.058, 22.646], ['114.117_22.673', 114.117, 22.673], ['113.949_22.689', 113.949, 22.689], ['114.392_22.711', 114.392, 22.711], ['114.033_22.67', 114.033, 22.67], ['113.987_22.558', 113.987, 22.558], ['114.052_22.51', 114.052, 22.51], ['113.918_22.583', 113.918, 22.583], ['113.874_22.596', 113.874, 22.596], ['114.238_22.688', 114.238, 22.688], ['114.071_22.643', 114.071, 22.643], ['114.023_22.529', 114.023, 22.529], ['113.999_22.682', 113.999, 22.682], ['114.012_22.551', 114.012, 22.551], ['114.103_22.702', 114.103, 22.702], ['113.912_22.586', 113.912, 22.586], ['114.275_22.697', 114.275, 22.697], ['113.939_22.764', 113.939, 22.764], ['114.031_22.521', 114.031, 22.521], ['113.9_22.563', 113.9, 22.563], ['114.276_22.729', 114.276, 22.729], ['114.037_22.708', 114.037, 22.708], ['113.851_22.726', 113.851, 22.726], ['114.116_22.595', 114.116, 22.595], ['113.92_22.532', 113.92, 22.532], ['113.827_22.769', 113.827, 22.769], ['114.423_22.697', 114.423, 22.697], ['114.138_22.676', 114.138, 22.676], ['113.824_22.734', 113.824, 22.734], ['114.493_22.6', 114.493, 22.6], ['113.85_22.584', 113.85, 22.584], ['113.909_22.566', 113.909, 22.566], ['113.866_22.58', 113.866, 22.58], ['114.027_22.661', 114.027, 22.661], ['114.241_22.74', 114.241, 22.74], ['114.024_22.649', 114.024, 22.649], ['114.022_22.534', 114.022, 22.534], ['113.917_22.58', 113.917, 22.58], ['113.841_22.501', 113.841, 22.501], ['113.848_22.571', 113.848, 22.571], ['114.329_22.796', 114.329, 22.796], ['113.918_22.544', 113.918, 22.544], ['113.969_22.619', 113.969, 22.619], ['113.886_22.666', 113.886, 22.666], ['114.035_22.662', 114.035, 22.662], ['113.88_22.574', 113.88, 22.574], ['113.811_22.756', 113.811, 22.756], ['114.048_22.601', 114.048, 22.601], ['114.22_22.616', 114.22, 22.616], ['113.886_22.776', 113.886, 22.776], ['113.852_22.77', 113.852, 22.77], ['114.29_22.769', 114.29, 22.769], ['113.859_22.601', 113.859, 22.601], ['113.824_22.718', 113.824, 22.718], ['114.018_22.622', 114.018, 22.622], ['114.103_22.608', 114.103, 22.608], ['114.129_22.592', 114.129, 22.592], ['114.309_22.711', 114.309, 22.711], ['113.875_22.599', 113.875, 22.599], ['114.063_22.523', 114.063, 22.523], ['113.815_22.775', 113.815, 22.775], ['114.16_22.569', 114.16, 22.569], ['114.118_22.604', 114.118, 22.604], ['113.816_22.659', 113.816, 22.659], ['113.813_22.659', 113.813, 22.659], ['113.995_22.681', 113.995, 22.681], ['114.125_22.689', 114.125, 22.689], ['114.064_22.526', 114.064, 22.526], ['114.006_22.739', 114.006, 22.739], ['114.042_22.648', 114.042, 22.648], ['113.88_22.782', 113.88, 22.782], ['113.816_22.673', 113.816, 22.673], ['114.133_22.572', 114.133, 22.572], ['113.958_22.626', 113.958, 22.626], ['114.048_22.654', 114.048, 22.654], ['114.039_22.554', 114.039, 22.554], ['114.132_22.567', 114.132, 22.567], ['114.159_22.649', 114.159, 22.649], ['114.028_22.535', 114.028, 22.535], ['114.248_22.726', 114.248, 22.726], ['114.05_22.743', 114.05, 22.743], ['113.988_22.566', 113.988, 22.566], ['113.878_22.508', 113.878, 22.508], ['114.116_22.56', 114.116, 22.56], ['114.21_22.698', 114.21, 22.698], ['113.978_22.682', 113.978, 22.682], ['114.05_22.545', 114.05, 22.545], ['114.072_22.628', 114.072, 22.628], ['114.057_22.616', 114.057, 22.616], ['113.797_22.733', 113.797, 22.733], ['114.086_22.704', 114.086, 22.704], ['114.002_22.667', 114.002, 22.667], ['114.254_22.592', 114.254, 22.592], ['114.132_22.562', 114.132, 22.562], ['114.101_22.544', 114.101, 22.544], ['114.103_22.651', 114.103, 22.651], ['114.058_22.525', 114.058, 22.525], ['114.033_22.616', 114.033, 22.616], ['114.103_22.617', 114.103, 22.617], ['114.02_22.536', 114.02, 22.536], ['113.824_22.772', 113.824, 22.772], ['113.981_22.706', 113.981, 22.706], ['113.895_22.563', 113.895, 22.563], ['113.834_22.707', 113.834, 22.707], ['114.128_22.595', 114.128, 22.595], ['114.138_22.68', 114.138, 22.68], ['113.973_22.541', 113.973, 22.541], ['113.862_22.605', 113.862, 22.605], ['114.146_22.609', 114.146, 22.609], ['113.797_22.68', 113.797, 22.68], ['113.882_22.549', 113.882, 22.549], ['114.065_22.557', 114.065, 22.557], ['114.077_22.55', 114.077, 22.55], ['114.001_22.734', 114.001, 22.734], ['113.806_22.705', 113.806, 22.705], ['113.808_22.704', 113.808, 22.704], ['114.331_22.685', 114.331, 22.685], ['114.055_22.682', 114.055, 22.682], ['113.956_22.57', 113.956, 22.57], ['114.059_22.662', 114.059, 22.662], ['113.894_22.781', 113.894, 22.781], ['113.816_22.781', 113.816, 22.781], ['114.259_22.591', 114.259, 22.591], ['114.297_22.695', 114.297, 22.695], ['114.233_22.695', 114.233, 22.695], ['113.861_22.571', 113.861, 22.571], ['113.803_22.718', 113.803, 22.718], ['113.905_22.514', 113.905, 22.514], ['114.247_22.562', 114.247, 22.562], ['113.91_22.516', 113.91, 22.516], ['114.128_22.695', 114.128, 22.695], ['113.869_22.581', 113.869, 22.581], ['113.811_22.774', 113.811, 22.774], ['113.897_22.579', 113.897, 22.579], ['113.814_22.673', 113.814, 22.673], ['113.949_22.582', 113.949, 22.582], ['113.801_22.698', 113.801, 22.698], ['114.056_22.574', 114.056, 22.574], ['114.051_22.549', 114.051, 22.549], ['114.108_22.606', 114.108, 22.606], ['114.124_22.576', 114.124, 22.576], ['113.891_22.581', 113.891, 22.581], ['114.064_22.659', 114.064, 22.659], ['113.859_22.563', 113.859, 22.563], ['114.141_22.551', 114.141, 22.551], ['114.4_22.656', 114.4, 22.656], ['114.248_22.729', 114.248, 22.729], ['113.92_22.678', 113.92, 22.678], ['114.126_22.657', 114.126, 22.657], ['113.995_22.531', 113.995, 22.531], ['113.889_22.785', 113.889, 22.785], ['113.863_22.768', 113.863, 22.768], ['114.238_22.742', 114.238, 22.742], ['113.871_22.57', 113.871, 22.57], ['113.893_22.592', 113.893, 22.592], ['113.9_22.723', 113.9, 22.723], ['114.101_22.625', 114.101, 22.625], ['114.053_22.538', 114.053, 22.538], ['113.891_22.462', 113.891, 22.462], ['114.122_22.541', 114.122, 22.541], ['113.858_22.62', 113.858, 22.62], ['113.945_22.521', 113.945, 22.521], ['114.078_22.542', 114.078, 22.542], ['113.98_22.548', 113.98, 22.548], ['113.944_22.544', 113.944, 22.544], ['114.127_22.701', 114.127, 22.701], ['114.103_22.564', 114.103, 22.564], ['114.035_22.561', 114.035, 22.561], ['114.015_22.646', 114.015, 22.646], ['113.849_22.612', 113.849, 22.612], ['113.862_22.665', 113.862, 22.665], ['114.324_22.786', 114.324, 22.786], ['113.869_22.56', 113.869, 22.56], ['114.036_22.564', 114.036, 22.564], ['114.233_22.723', 114.233, 22.723], ['113.834_22.822', 113.834, 22.822], ['113.835_22.628', 113.835, 22.628], ['114.133_22.677', 114.133, 22.677], ['113.839_22.605', 113.839, 22.605], ['114.05_22.547', 114.05, 22.547], ['113.948_22.543', 113.948, 22.543], ['114.137_22.632', 114.137, 22.632], ['113.892_22.768', 113.892, 22.768], ['113.798_22.729', 113.798, 22.729], ['113.922_22.728', 113.922, 22.728], ['113.975_22.564', 113.975, 22.564], ['114.354_22.676', 114.354, 22.676], ['113.916_22.53', 113.916, 22.53], ['113.95_22.542', 113.95, 22.542], ['114.05_22.521', 114.05, 22.521], ['114.486_22.581', 114.486, 22.581], ['113.84_22.605', 113.84, 22.605], ['113.804_22.763', 113.804, 22.763], ['114.044_22.559', 114.044, 22.559], ['113.93_22.74', 113.93, 22.74], ['114.27_22.59', 114.27, 22.59], ['114.062_22.522', 114.062, 22.522], ['113.793_22.734', 113.793, 22.734], ['113.988_22.701', 113.988, 22.701], ['113.907_22.485', 113.907, 22.485], ['114.05_22.549', 114.05, 22.549], ['113.834_22.695', 113.834, 22.695], ['114.29_22.729', 114.29, 22.729], ['113.788_22.714', 113.788, 22.714], ['114.13_22.628', 114.13, 22.628], ['114.076_22.533', 114.076, 22.533], ['113.91_22.722', 113.91, 22.722], ['113.849_22.783', 113.849, 22.783], ['113.864_22.598', 113.864, 22.598], ['114.358_22.727', 114.358, 22.727], ['114.01_22.732', 114.01, 22.732], ['114.061_22.562', 114.061, 22.562], ['113.937_22.576', 113.937, 22.576], ['113.813_22.71', 113.813, 22.71], ['114.22_22.728', 114.22, 22.728], ['114.476_22.586', 114.476, 22.586], ['113.794_22.761', 113.794, 22.761], ['113.829_22.776', 113.829, 22.776], ['113.893_22.587', 113.893, 22.587], ['113.811_22.743', 113.811, 22.743], ['114.25_22.582', 114.25, 22.582], ['113.935_22.578', 113.935, 22.578], ['113.924_22.544', 113.924, 22.544], ['114.32_22.726', 114.32, 22.726], ['113.92_22.725', 113.92, 22.725], ['113.866_22.568', 113.866, 22.568], ['113.829_22.725', 113.829, 22.725], ['113.851_22.611', 113.851, 22.611], ['114.022_22.531', 114.022, 22.531], ['113.961_22.529', 113.961, 22.529], ['113.828_22.771', 113.828, 22.771], ['114.272_22.635', 114.272, 22.635], ['113.951_22.562', 113.951, 22.562], ['113.903_22.557', 113.903, 22.557], ['114.034_22.605', 114.034, 22.605], ['114.028_22.719', 114.028, 22.719], ['113.864_22.826', 113.864, 22.826], ['113.902_22.763', 113.902, 22.763], ['113.987_22.699', 113.987, 22.699], ['113.985_22.7', 113.985, 22.7], ['114.116_22.566', 114.116, 22.566], ['114.075_22.536', 114.075, 22.536], ['114.322_22.749', 114.322, 22.749], ['113.933_22.577', 113.933, 22.577], ['113.96_22.541', 113.96, 22.541], ['113.829_22.766', 113.829, 22.766], ['114.071_22.547', 114.071, 22.547], ['114.138_22.603', 114.138, 22.603], ['114.277_22.689', 114.277, 22.689], ['114.009_22.639', 114.009, 22.639], ['114.023_22.675', 114.023, 22.675], ['113.907_22.514', 113.907, 22.514], ['114.316_22.694', 114.316, 22.694], ['114.382_22.685', 114.382, 22.685], ['114.011_22.658', 114.011, 22.658], ['113.793_22.744', 113.793, 22.744], ['113.902_22.581', 113.902, 22.581], ['113.805_22.692', 113.805, 22.692], ['114.386_22.713', 114.386, 22.713], ['113.895_22.552', 113.895, 22.552], ['113.903_22.757', 113.903, 22.757], ['113.934_22.492', 113.934, 22.492], ['113.957_22.594', 113.957, 22.594], ['113.878_22.792', 113.878, 22.792], ['114.242_22.647', 114.242, 22.647], ['114.003_22.737', 114.003, 22.737], ['114.025_22.725', 114.025, 22.725], ['114.278_22.698', 114.278, 22.698], ['114.487_22.578', 114.487, 22.578], ['114.055_22.712', 114.055, 22.712], ['114.295_22.727', 114.295, 22.727], ['113.95_22.532', 113.95, 22.532], ['113.883_22.804', 113.883, 22.804], ['113.866_22.562', 113.866, 22.562], ['114.016_22.731', 114.016, 22.731], ['113.997_22.54', 113.997, 22.54], ['113.925_22.545', 113.925, 22.545], ['113.824_22.771', 113.824, 22.771], ['114.281_22.691', 114.281, 22.691], ['114.28_22.687', 114.28, 22.687], ['114.12_22.641', 114.12, 22.641], ['113.843_22.769', 113.843, 22.769], ['114.279_22.735', 114.279, 22.735], ['113.95_22.542', 113.95, 22.542], ['114.233_22.727', 114.233, 22.727], ['113.827_22.776', 113.827, 22.776], ['113.994_22.733', 113.994, 22.733], ['114.01_22.535', 114.01, 22.535], ['114.092_22.561', 114.092, 22.561], ['113.895_22.555', 113.895, 22.555], ['113.922_22.651', 113.922, 22.651], ['114.017_22.541', 114.017, 22.541], ['114.034_22.527', 114.034, 22.527], ['114.103_22.543', 114.103, 22.543], ['113.935_22.527', 113.935, 22.527], ['113.829_22.646', 113.829, 22.646], ['113.893_22.56', 113.893, 22.56], ['114.011_22.632', 114.011, 22.632], ['114.238_22.744', 114.238, 22.744], ['113.877_22.787', 113.877, 22.787], ['113.985_22.668', 113.985, 22.668], ['114.386_22.71', 114.386, 22.71], ['113.847_22.608', 113.847, 22.608], ['113.889_22.716', 113.889, 22.716], ['114.03_22.616', 114.03, 22.616], ['114.048_22.64', 114.048, 22.64], ['113.832_22.769', 113.832, 22.769], ['113.982_22.676', 113.982, 22.676], ['113.933_22.529', 113.933, 22.529], ['114.166_22.562', 114.166, 22.562], ['113.937_22.694', 113.937, 22.694], ['114.183_22.65', 114.183, 22.65], ['114.041_22.611', 114.041, 22.611], ['114.059_22.545', 114.059, 22.545], ['113.836_22.7', 113.836, 22.7], ['114.151_22.614', 114.151, 22.614], ['114.031_22.758', 114.031, 22.758], ['114.05_22.537', 114.05, 22.537], ['114.021_22.619', 114.021, 22.619], ['114.067_22.552', 114.067, 22.552], ['114.035_22.626', 114.035, 22.626], ['113.962_22.546', 113.962, 22.546], ['113.825_22.65', 113.825, 22.65], ['113.938_22.793', 113.938, 22.793], ['113.8_22.685', 113.8, 22.685], ['114.096_22.544', 114.096, 22.544], ['114.022_22.531', 114.022, 22.531], ['113.887_22.743', 113.887, 22.743], ['113.913_22.587', 113.913, 22.587], ['114.105_22.546', 114.105, 22.546], ['114.053_22.528', 114.053, 22.528], ['113.983_22.705', 113.983, 22.705], ['113.974_22.554', 113.974, 22.554], ['114.169_22.564', 114.169, 22.564], ['114.102_22.593', 114.102, 22.593], ['113.938_22.696', 113.938, 22.696], ['113.964_22.702', 113.964, 22.702], ['113.919_22.526', 113.919, 22.526], ['114.036_22.646', 114.036, 22.646], ['114.054_22.566', 114.054, 22.566], ['113.851_22.613', 113.851, 22.613], ['114.048_22.524', 114.048, 22.524], ['113.992_22.528', 113.992, 22.528], ['113.827_22.646', 113.827, 22.646], ['113.903_22.775', 113.903, 22.775], ['114.007_22.643', 114.007, 22.643], ['113.939_22.541', 113.939, 22.541], ['114.067_22.54', 114.067, 22.54], ['114.135_22.57', 114.135, 22.57], ['114.079_22.55', 114.079, 22.55], ['113.784_22.731', 113.784, 22.731], ['114.079_22.533', 114.079, 22.533], ['113.918_22.57', 113.918, 22.57], ['114.094_22.744', 114.094, 22.744], ['114.109_22.606', 114.109, 22.606], ['114.115_22.698', 114.115, 22.698], ['114.048_22.6', 114.048, 22.6], ['114.056_22.634', 114.056, 22.634], ['113.991_22.679', 113.991, 22.679], ['113.877_22.584', 113.877, 22.584], ['114.216_22.56', 114.216, 22.56], ['114.24_22.604', 114.24, 22.604], ['114.105_22.558', 114.105, 22.558], ['113.805_22.671', 113.805, 22.671], ['113.921_22.513', 113.921, 22.513], ['114.401_22.757', 114.401, 22.757], ['114.098_22.544', 114.098, 22.544], ['114.342_22.699', 114.342, 22.699], ['113.832_22.765', 113.832, 22.765], ['114.101_22.63', 114.101, 22.63], ['114.12_22.546', 114.12, 22.546], ['114.003_22.727', 114.003, 22.727], ['114.238_22.735', 114.238, 22.735], ['113.917_22.659', 113.917, 22.659], ['114.055_22.631', 114.055, 22.631], ['113.86_22.733', 113.86, 22.733], ['114.072_22.535', 114.072, 22.535], ['113.927_22.76', 113.927, 22.76], ['113.999_22.652', 113.999, 22.652], ['113.955_22.801', 113.955, 22.801], ['114.296_22.671', 114.296, 22.671], ['114.378_22.729', 114.378, 22.729], ['113.862_22.654', 113.862, 22.654], ['114.216_22.631', 114.216, 22.631], ['114.232_22.563', 114.232, 22.563], ['113.847_22.621', 113.847, 22.621], ['113.827_22.666', 113.827, 22.666], ['113.873_22.802', 113.873, 22.802], ['113.95_22.585', 113.95, 22.585], ['113.816_22.715', 113.816, 22.715], ['114.031_22.675', 114.031, 22.675], ['113.988_22.735', 113.988, 22.735], ['114.03_22.648', 114.03, 22.648], ['113.905_22.514', 113.905, 22.514], ['114.107_22.546', 114.107, 22.546], ['114.185_22.636', 114.185, 22.636], ['113.806_22.73', 113.806, 22.73], ['114.028_22.741', 114.028, 22.741], ['114.043_22.654', 114.043, 22.654], ['113.865_22.764', 113.865, 22.764], ['114.122_22.695', 114.122, 22.695], ['114.153_22.624', 114.153, 22.624], ['113.967_22.586', 113.967, 22.586], ['114.416_22.629', 114.416, 22.629], ['113.967_22.632', 113.967, 22.632], ['113.9_22.763', 113.9, 22.763], ['114.009_22.638', 114.009, 22.638], ['114.057_22.605', 114.057, 22.605], ['113.876_22.585', 113.876, 22.585], ['113.84_22.611', 113.84, 22.611], ['113.887_22.72', 113.887, 22.72], ['114.05_22.569', 114.05, 22.569], ['113.989_22.686', 113.989, 22.686], ['114.357_22.693', 114.357, 22.693], ['114.127_22.65', 114.127, 22.65], ['114.12_22.547', 114.12, 22.547]]

    city = '深圳'
    g = Geo()
    g.add_schema(maptype=city)

    # 定义坐标对应的名称，添加到坐标库中 add_coordinate(name, lng, lat)
    for k, lng, lat in datas:
        g.add_coordinate(k, lng, lat)

    # 定义数据对，
    ds3 = {}
    for k, t1, t2 in datas:
        ds3.setdefault(k, 0)
        ds3[k] += 1
    data_pair = [(k, v) for k, v in ds3.items()]

    # Geo 图类型，有 scatter, effectScatter, heatmap, lines 4 种，建议使用
    # from pyecharts.globals import GeoType
    # GeoType.GeoType.EFFECT_SCATTER，GeoType.HEATMAP，GeoType.LINES

    # 将数据添加到地图上
    g.add('', data_pair, type_=GeoType.EFFECT_SCATTER, symbol_size=5)
    # 设置样式
    g.set_series_opts(label_opts=opts.LabelOpts(is_show=False))
    # 自定义分段 color 可以用取色器取色
    pieces = [
        {'max': 1, 'label': '0以下', 'color': '#50A3BA'},
        {'min': 1, 'max': 10, 'label': '1-10', 'color': '#3700A4'},
        {'min': 10, 'max': 20, 'label': '10-20', 'color': '#81AE9F'},
        {'min': 20, 'max': 30, 'label': '20-30', 'color': '#E2C568'},
        {'min': 30, 'max': 50, 'label': '30-50', 'color': '#FCF84D'},
        {'min': 50, 'max': 100, 'label': '50-100', 'color': '#DD0200'},
        {'min': 100, 'max': 200, 'label': '100-200', 'color': '#DD675E'},
        {'min': 200, 'label': '200以上', 'color': '#D94E5D'}  # 有下限无上限
    ]
    #  is_piecewise 是否自定义分段， 变为true 才能生效
    g.set_global_opts(
        visualmap_opts=opts.VisualMapOpts(is_piecewise=True, pieces=pieces),
        title_opts=opts.TitleOpts(title="{}-设备分布".format(city)),
    )

    # 渲染成html, 可用浏览器直接打开
    g.render(r'D:\Users\gswyhq\data\数据梳理\test_render.html')

def main():
    # test1()
    test3()


if __name__ == '__main__':
    main()