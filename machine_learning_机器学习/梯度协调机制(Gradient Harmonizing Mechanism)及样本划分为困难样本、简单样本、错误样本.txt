
梯度协调机制(Gradient Harmonizing Mechanism)使得模型训练更加高效与稳健，并可以收敛到更好的结果

梯度模长（gradient norm）
其中 p=sigmoid(x) 为模型所预测的样本类别的概率，p* 是对应的监督(即训练时标注的label)。
可以定义一个梯度模长，g=|p-p*|。
ｇ的值代表了样本预测的难易程度，ｇ的值越大，代表预测越困难。
预测值ｐ与真实值ｐ*越接近，ｇ的值越小;
正常情况下，梯度范数与样本数量的关系是：范数小(g值小)的例子占绝大多数，这就表示简单样本的数量很多，它们产生的累计贡献就在模型更新过程中有巨大的影响，由于这部分的样本很容易判别，这部分的参数更新并不会改善模型的判断能力，使得模型的训练变得低效。
由此提出了梯度均衡机制，根据梯度范数的分布比例进行一个相应的标准化，使各种类型的样本对模型参数更新有均衡的贡献，就是对不同样本产生的梯度进行一个加权，改变它们的贡献量。
对于某个特定的样本，计算它的梯度范数，然后计算其在单元区域内的样本密度，样本密度越大，就说明样本数量越多，那么在计算损失函数的时候就让他乘以一个较小的数，降低他对模型参数更新的贡献。




